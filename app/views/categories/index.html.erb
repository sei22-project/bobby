<!-- Search bar. Confirm whether search is for any field or for a specific field -->

<p>Sort By:</p>

<%= form_with url: categories_sort_url, method: "get" do |form| %>
  <%= form.label :date %><br>
	<%= form.text_field :date, class: 'sortdate-flatpick' %>

	<% categories_array = @categories.all.map { |category| [category.game_type, category.id] } %>
	<%= select(:category, :category_id, options_for_select(categories_array))%>

	<%= form.submit 'Find Game' %>
<% end %>

<%
	def get_category(category_id)
		for category in @categories
			if category.id == category_id
				return category.game_type
			end
		end
	end
%>

<div class="game-cards-container">
	<% @games.each do |game| %>
		<div style="border: 1px solid black" class="game-card">
			<p>
					<%=get_category(game.category_id)%>
			</p>
			<p>
					<%=game.title%>
			</p>
			<p>
					<%=game.start.strftime("%d %b") if game.start%>
			</p>
			<p> Start time:
					<%=game.start.strftime("%H:%M") if game.start%>
			</p>
			<p> End time:
					<%=game.end.strftime("%H:%M") if game.end%>
			</p>
			<p>
					<%=game.venue%>
			</p>
			<p> Players required:
					<%=game.players_required%>
			</p>
		</div>
	<% end %>
</div>


<%= javascript_pack_tag 'category' %>